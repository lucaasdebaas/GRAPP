<!DOCTYPE HTML>
<html>
<head>
  <title>GRAPH</title>

  <style type="text/css">
    body, html {
      font-family: sans-serif;
    }
  </style>

  <link rel="stylesheet" type="text/css"  href="style.css">
	<script src="menu.js"></script>
	<script>
		//trigger swipe
	document.addEventListener('touchstart', handleTouchStart, false);        
	document.addEventListener('touchmove', handleTouchMove, false);

	var xDown = null;                                                        
	var yDown = null;                                                        

	function handleTouchStart(evt) {                                         
		xDown = evt.touches[0].clientX;                                      
		yDown = evt.touches[0].clientY;                                      
	};                                                

	function handleTouchMove(evt) {
		if ( ! xDown || ! yDown ) {
			return;
		}

    var xUp = evt.touches[0].clientX;                                    
    var yUp = evt.touches[0].clientY;

    var xDiff = xDown - xUp;
    var yDiff = yDown - yUp;
	
	
	
    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/
        if ( xDiff > 0 ) {
		//left swipe
		if(v == 1) {
			 closeNav();
		 } else {
            openSwipe();
			}
        } else {
		//right swipe
            closeSwipe();
        }                       
    } else {
        if ( yDiff > 0 ) {
            /* up swipe (niet in gebruik) */ 
        } else { 
            /* down swipe (niet in gebruik) */
        }                                                                 
    }
    /* reset values */
    xDown = null;
    yDown = null;                                             
}	
	</script>
	<script language="javascript" src="knoppengraph.js"></script>
	<meta charset="utf-8">
	
</head>


<body>

<!-- Header, indien nodig gebruik dit tekentje voor hamburgermenu en pas padding aan: &#9776; -->
<div id="header"><a id="hamburger" onclick="toggleNav()"><img src="hamburger.svg" height="18px"/></a><span id="grapp">grapp</span></div>  

<!-- Sidenav -->
	<div id="mySidenav" class="sidenav">
  		<a href="index.html"><img alt="123" class="sidenavimg" src="calculator.png" height="25px" width="25" valign="middle"/>Calculator</a>
  		<a class="active" onclick="closeNav()"><img class="sidenavimg" alt="graph" src="graph.png" height="25px" width="25" valign="middle"/>Graph</a>
		<hr color="#999999" width="90%">
	</div>
	

	
<div name="1" id="1" style="display:block;">
		<form name="graphsettings" id="graphsettings">
				<input class="formuleinput" 		name = "formule1" 	id="formule1" 	type="text" placeholder="function 1" 	readonly onclick="formule1onclick(formule1,formule2,xmin,xmax,ymin,ymax)"></input>
				<input class="formuleinput" 		name = "formule2" 	id="formule2" 	type="text" placeholder="function 2" 	readonly onclick="formule2onclick(formule1,formule2,xmin,xmax,ymin,ymax)"></input>
			<table>
			<tr>
				<td class="label" id="xminlab" onclick="xminonclick(formule1,formule2,xmin,xmax,ymin,ymax)">min X</td>
				<td class="input"><input class="windowsettingsinput" 			id="xmin" 		type="text" readonly onclick="xminonclick(formule1,formule2,xmin,xmax,ymin,ymax)" /></td>
				<td class="label" id="xmaxlab" onclick="xmaxonclick(formule1,formule2,xmin,xmax,ymin,ymax)">max X</td>
				<td class="input"><input class="windowsettingsinput" 			id="xmax" 		type="text" readonly onclick="xmaxonclick(formule1,formule2,xmin,xmax,ymin,ymax)" /></td>
			</tr>
			<tr>
				<td class="label" id="yminlab" onclick="yminonclick(formule1,formule2,xmin,xmax,ymin,ymax)">min Y</td>
				<td class="input"><input class="windowsettingsinput" 			id="ymin" 		type="text" readonly onclick="yminonclick(formule1,formule2,xmin,xmax,ymin,ymax)" /></td>
				<td class="label" id="ymaxlab" onclick="ymaxonclick(formule1,formule2,xmin,xmax,ymin,ymax)">max Y</td>
				<td class="input"><input class="windowsettingsinput" 			id="ymax" 		type="text" readonly onclick="ymaxonclick(formule1,formule2,xmin,xmax,ymin,ymax)" /></td>
			</table>
		</form>
</div>
	
<!-- <div name="1" id="1" style="display:block;"> -->
	<!-- <div name="graphsettingsform" id="graphsettingsform">  -->
		<!-- <form name="graphsettings" id="graphsettings"> -->
			<!-- <div class="formrow"> <label class="formulelabel">Functie 1  		</label>	<input class="formuleinput" name = "formule1" id="formule1" type="text" readonly onclick="formule1onclick(formule1,formule2,xmin,xmax,ymin,ymax)"></input> </div> -->
			<!-- <div class="formrow"> <label class="formulelabel">Functie 2  		</label>	<input class="formuleinput" name = "formule2" id="formule2" type="text" readonly onclick="formule2onclick(formule1,formule2,xmin,xmax,ymin,ymax)"></input> </div> -->
			<!-- <div class="formrow"> <label id="xminlabel"class="windowsettingslabel">X-min  </label>	<input class="windowsettingsinput" id="xmin" type="text" readonly onclick="xminonclick(formule1,formule2,xmin,xmax,ymin,ymax)">	</input> </div> -->
			<!-- <div class="formrow"> <label id="ymaxlabel"class="windowsettingslabel">X-max  </label>	<input class="windowsettingsinput" id="xmax" type="text" readonly onclick="xmaxonclick(formule1,formule2,xmin,xmax,ymin,ymax)">	</input> </div> -->
			<!-- <div class="formrow"> <label id="yminlabel"class="windowsettingslabel">Y-min	</label>	<input class="windowsettingsinput" id="ymin" type="text" readonly onclick="yminonclick(formule1,formule2,xmin,xmax,ymin,ymax)">	</input> </div> -->
			<!-- <div class="formrow"> <label id="ymaxlabel"class="windowsettingslabel">Y-max	</label>	<input class="windowsettingsinput" id="ymax" type="text" readonly onclick="ymaxonclick(formule1,formule2,xmin,xmax,ymin,ymax)">	</input> </div> -->
			
			<!-- <script> -->
			
			<!-- </script> -->
		<!-- </form> -->
		<!-- </div> -->
	<!-- </div> -->
	
	
	

	<form name="Calc">
		
		<div name="buttons" id="buttons" style="display:block;">
	
<!-- Swipemenu -->
	<div id="mySwipemenu" class="swipemenu">
			<input TYPE="button" NAME="INV" VALUE="INV" OnClick= "" class="operator">
            <input TYPE="button" NAME="log"   VALUE="log" OnCLick="_log()">
            <input TYPE="button" NAME="ln" VALUE="ln" OnClick="_ln()">
            <input TYPE="button" NAME="tan" 	VALUE="tan" onClick="_tan()"> 
            <input TYPE="button" NAME="sin"   VALUE="sin" OnClick="_sin()">
            <input TYPE="button" NAME="cos"   VALUE="cos" OnCLick="_cos()">
            <input TYPE="button" NAME="pi" VALUE="&pi;" OnClick="_pi()">
            <input TYPE="button" NAME="e"  VALUE="e" onClick="_e()">
            <input TYPE="button" NAME="negMin"  VALUE="(-)" onClick="">
            <input TYPE="button" NAME="xWortel"  VALUE="x&radic;" onClick="_xWortel()">
            <input TYPE="button" NAME="secondWortel"   VALUE="&radic;" onClick="_wortel()">
            <input TYPE="button" NAME="pow"   VALUE="^" onClick="_macht()">
	</div> 
	
<!-- Rekenmachine -->

	<div id="calculator">		
		<div class="keys">
        	<input TYPE="button" NAME="x"   		VALUE="x" 				OnClick= "_x()">
            <input TYPE="button" NAME=" ( "   		VALUE="  (  " 			OnCLick=" _linkerHaakje()">
            <input TYPE="button" NAME=" ) " 		VALUE="  )  " 			OnClick="_rechterHaakje()">
            <input TYPE="button" NAME="backspace" 	VALUE=" &larr; " 		OnClick="_backspace()"			class="operator">
            <input TYPE="button" NAME="one"   		VALUE="  1  " 			OnClick="_1()">
            <input TYPE="button" NAME="two"   		VALUE="  2  " 			OnCLick="_2()">
            <input TYPE="button" NAME="three" 		VALUE="  3  " 			OnClick="_3()">
            <input TYPE="button" NAME="times"  		VALUE="  *  " 		OnClick="vermenigvuldigen()"	class="operator">
            <input TYPE="button" NAME="four"  		VALUE="  4  " 			OnClick="_4()">
            <input TYPE="button" NAME="five"  		VALUE="  5  " 			OnCLick="_5()">
            <input TYPE="button" NAME="six"   		VALUE="  6  " 			OnClick="_6()">
            <input TYPE="button" NAME="div"   		VALUE="  /  " 	OnClick="delen()"				class="operator">
            <input TYPE="button" NAME="seven" 		VALUE="  7  " 			OnClick="_7()">
            <input TYPE="button" NAME="eight" 		VALUE="  8  " 			OnCLick="_8()">
            <input TYPE="button" NAME="nine"  		VALUE="  9  " 			OnClick="_9()">
            <input TYPE="button" NAME="plus" 		VALUE="  +  " 			OnClick="optellen()"			class="operator">
            <input TYPE="button" NAME="dot" 		VALUE="  .  " 			OnClick="_punt()">
            <input TYPE="button" NAME="zero"  		VALUE="  0  " 			OnClick="_0()">
            <input TYPE="button" NAME="enter"   	VALUE="  RUN" 			OnClick="run()"					class="run">
            <input TYPE="button" NAME="minus" 		VALUE="  -  " 			OnClick="aftrekken(formule1.value, formule2.value, xmin.value, xmax.value, ymin.value, ymax.value)"			class="operator">
		</div>
	</div>
	</div>
</form>
</div>
	
	
<div id="2" style="display:none" width="100%">
	
    <canvas id="myCanvas"></canvas>
	
		<div id="formule1weergave"></div>
		<div id="formule2weergave"></div>
		
	<div id="footer">	
		<button type="button"  onclick="Back()" 		class="footerbutton">RETURN</button><button type="button"  onclick="Clearandback()"	class="footerbutton">CLEAR</button> 
	</div>
    <script>
      function Graph(config) {
        // user defined properties
        this.canvas = document.getElementById(config.canvasId);
        this.minX = config.minX;
        this.minY = config.minY;
        this.maxX = config.maxX;
        this.maxY = config.maxY;
        this.unitsPerTick = config.unitsPerTick;

        // constants
        this.axisColor = '#aaa';
        this.font = '8pt Calibri';
        this.tickSize = 3;

        // relationships
        this.context = this.canvas.getContext('2d');
        this.rangeX = this.maxX - this.minX;
        this.rangeY = this.maxY - this.minY;
        this.unitX = this.canvas.width / this.rangeX;
        this.unitY = this.canvas.height / this.rangeY;
        this.centerY = Math.round(Math.abs(this.minY / this.rangeY) * this.canvas.height);
        this.centerX = Math.round(Math.abs(this.minX / this.rangeX) * this.canvas.width);
        this.iteration = (this.maxX - this.minX) / 1000;
        this.scaleX = this.canvas.width / this.rangeX;
        this.scaleY = this.canvas.height / this.rangeY;

        // draw x and y axis  
        this.drawXAxis();
        this.drawYAxis();
      }

      Graph.prototype.drawXAxis = function() {
        var context = this.context;
        context.save();
        context.beginPath();
        context.moveTo(0, this.centerY);
        context.lineTo(this.canvas.width, this.centerY);
        context.strokeStyle = this.axisColor;
        context.lineWidth = 1;
        context.stroke();

        // draw tick marks
        var xPosIncrement = this.unitsPerTick * this.unitX;
        var xPos, unit;
        context.font = this.font;
        context.textAlign = 'center';
        context.textBaseline = 'top';

        // draw left tick marks
        xPos = this.centerX - xPosIncrement;
        unit = -1 * this.unitsPerTick;
        while(xPos > 0) {
          context.moveTo(xPos, this.centerY - this.tickSize / 2);
          context.lineTo(xPos, this.centerY + this.tickSize / 2);
          context.stroke();
          
		  //Show axis values
		  //context.fillText(unit, xPos, this.centerY + this.tickSize / 2 + 3);
          
		  unit -= this.unitsPerTick;
          xPos = Math.round(xPos - xPosIncrement);
        }

        // draw right tick marks
        xPos = this.centerX + xPosIncrement;
        unit = this.unitsPerTick;
        while(xPos < this.canvas.width) {
          context.moveTo(xPos, this.centerY - this.tickSize / 2);
          context.lineTo(xPos, this.centerY + this.tickSize / 2);
          context.stroke();
          
		  //Show axis values
		  //context.fillText(unit, xPos, this.centerY + this.tickSize / 2 + 3);
		  
          unit += this.unitsPerTick;
          xPos = Math.round(xPos + xPosIncrement);
        }
        context.restore();
		
      };

      Graph.prototype.drawYAxis = function() {
        var context = this.context;
        context.save();
        context.beginPath();
        context.moveTo(this.centerX, 0);
        context.lineTo(this.centerX, this.canvas.height);
        context.strokeStyle = this.axisColor;
        context.lineWidth = 1;
        context.stroke();

        // draw tick marks
        var yPosIncrement = this.unitsPerTick * this.unitY;
        var yPos, unit;
        context.font = this.font;
        context.textAlign = 'right';
        context.textBaseline = 'middle';

        // draw top tick marks
        yPos = this.centerY - yPosIncrement;
        unit = this.unitsPerTick;
        while(yPos > 0) {
          context.moveTo(this.centerX - this.tickSize / 2, yPos);
          context.lineTo(this.centerX + this.tickSize / 2, yPos);
          context.stroke();
          
		  //Show axis values
		  //context.fillText(unit, this.centerX - this.tickSize / 2 - 3, yPos);
          unit += this.unitsPerTick;
          yPos = Math.round(yPos - yPosIncrement);
        }

        // draw bottom tick marks
        yPos = this.centerY + yPosIncrement;
        unit = -1 * this.unitsPerTick;
        while(yPos < this.canvas.height) {
          context.moveTo(this.centerX - this.tickSize / 2, yPos);
          context.lineTo(this.centerX + this.tickSize / 2, yPos);
          context.stroke();
		  
		  //Show axis values
		  //context.fillText(unit, this.centerX - this.tickSize / 2 - 3, yPos);
          unit -= this.unitsPerTick;
          yPos = Math.round(yPos + yPosIncrement);
        }
        context.restore();
      };

      Graph.prototype.drawEquation = function(equation, color, thickness) {
        var context = this.context;
        context.save();
        context.save();
        this.transformContext();

        context.beginPath();
        context.moveTo(this.minX, equation(this.minX));

        for(var x = this.minX + this.iteration; x <= this.maxX; x += this.iteration) {
          context.lineTo(x, equation(x));
        }

        context.restore();
        context.lineJoin = 'round';
        context.lineWidth = thickness;
        context.strokeStyle = color;
        context.stroke();
        context.restore();
      };

      Graph.prototype.transformContext = function() {
        var context = this.context;

        // move context to center of canvas
        this.context.translate(this.centerX, this.centerY);

        /*
         * stretch grid to fit the canvas window, and
         * invert the y scale so that that increments
         * as you move upwards
         */
        context.scale(this.scaleX, -this.scaleY);
      };
      
	  
	  function run(formule1,formule2, xmin,ymin,xmax,ymax) {
	 /*
		// Checken of window-variable niet leeg is, anders vervangen door 10 of -10
		if ((typeof this.xmin.value !== 'number') || (this.xmin.value.length == 0)) {
			var xmin = -10;
		} else {
			var xmin = this.xmin.value; 
		}
		
		if ((typeof this.xmax.value !== 'number') || (this.xmax.value.length == 0)) {
			var xmax = 10;
		} else {
			var xmax = this.xmax.value; 
		}
				
		if ((typeof this.ymax.value !== 'number') || (this.ymax.value.length == 0)) {
			var ymin = -10; 
		} else {
			var ymin = -1 * this.ymax.value; // Gelieve deze rare constructie niet te verbeteren, want het bovenstaande programma spiegelt de y-as in de x-as
		}
		
		if ((typeof this.ymin.value !== 'number') || (this.ymin.value.length == 0)) {
			var ymax = 10; 
		} else {
			var ymax = -1 * this.ymin.value; // Gelieve deze rare constructie niet te verbeteren, want het bovenstaande programma spiegelt de y-as in de x-as
		}
	*/ 
		
		var xmin = this.xmin.value; 
		var xmax = this.xmax.value; 
		var ymin = -1 * this.ymax.value; // Gelieve deze rare constructie niet te verbeteren, want het bovenstaande programma spiegelt de y-as in de x-as
		var ymax = -1 * this.ymin.value; // Gelieve deze rare constructie niet te verbeteren, want het bovenstaande programma spiegelt de y-as in de x-as 
		
		
		
		if (xmin && xmax && ymin && ymax !== null) {
		
			if (xmin < xmax && ymin < ymax) {
				document.getElementById("1").style.display = "none";
				document.getElementById("2").style.display = "block";
				document.getElementById("buttons").style.display = "none";
				document.getElementById("formule1weergave").innerHTML = "Y<sub>1</sub> = " + this.formule1.value; 
				document.getElementById("formule2weergave").innerHTML = "Y<sub>2</sub> = " + this.formule2.value; 
				
				var myGraph = new Graph({
					
					
					canvasId: 'myCanvas',
					minX: eval('('+ xmin + ')'), 	
					minY: eval('('+ ymin + ')'),
					maxX: eval('('+ xmax + ')'),
					maxY: eval('('+ ymax + ')'),
					unitsPerTick: 1
				}); 
				
				//Formule 1
				myGraph.drawEquation(function(x) {
					var berekening = this.formule1.value; 
					var lengte = berekening.length;
					for (i=0; i<lengte; i++) {
						if (berekening.slice(i,i+2) == "*/" || berekening.slice(i,i+2) == "/*" || berekening.slice(i,i+2) == "*+" || berekening.slice(i,i+2) == "/+" || berekening.slice(i,i+2) == "-+" || berekening.slice(i,i+2) == "-*" || berekening.slice(i,i+2) == "+*" || berekening.slice(i,i+2) == "-/" || berekening.slice(i,i+2) == "+/" || berekening.slice(i,i+2) == "**" || berekening.slice(i,i+2) == "//" || berekening.slice(i,i+2) == "++") {
							berekening = "error";  //De variabele berekening is error, zodat de variabele uitvoer undefined zal zijn.
						}
					}
					
					for (j=1; j<lengte; j++) {
						if (berekening.substr(j,1) == ")") {
							sluithaakjes += 1;
						}
						if (berekening.substr(j,1) == "(") {
							openhaakjes += 1;
						}
					}
					if (openhaakjes != sluithaakjes) {
						berekening == "error";
					}
					
					var berekening0 = berekening.replace("--", "+");  //dubbele min vervangen door plus
					var berekening1 = berekening0.replace("log", "1/Math.LN10 * Math.log"); //Math.log berekent de natuurlijke logaritme, daarom deze omslachtige manier.
					var berekening2 = berekening1.replace("ln", "Math.log");
					var berekening3 = berekening2.replace("sin", "Math.sin");
					var berekening4 = berekening3.replace("cos", "Math.cos");
					var berekening5 = berekening4.replace("tan", "Math.tan");
					var berekening6 = berekening5.replace("π", "Math.PI");
					var berekening7 = berekening6.replace("e", "Math.E");
					var berekening8 = berekening7.replace("√", "Math.sqrt");
					var berekening10 = berekening8.replace("^", "**");
					
					//Hogere machtswortelberekenen
					
					var tekens = berekening10.length;
					var berekening11 = "";  //deze drie variabelen worden aangemaakt om later in een berekening te testen of ze leeg zijn
					var grondtal = "";
					var exponent = "";
					for (i=0; i<tekens; i++) {
						if (berekening10.slice(i,i+5) == "xWort") {
							//Grondtal van de macht zoeken
							if (berekening10.slice(i-1,i) == ")") {  //als het teken voor de macht een sluithaakje is, dan
								var sluithaakjes = 0;  // dit is het aantal sluithaakjes wat gevonden wordt voor de macht
								var openhaakjes = 0;  // dit is het aantal openhaakjes wat gevonden wordt voor de macht
								for (j=1; j<i; j++) {
									if (berekening10.substr(i-j,1) == ")") {
										sluithaakjes += 1;
									}
									if (berekening10.substr(i-j,1) == "(") {
										openhaakjes += 1;
									}
									if (sluithaakjes == openhaakjes) {
										console.log(berekening10.slice(i-(j+1), i));
										grondtal = eval(berekening10.slice(i-(j+1), i));	 //dit is het grondtal van de macht	
										var berekening11 = berekening10.replace(berekening10.slice(i-(j+1), i), "grondtal");
										j=i;  //deze loop niet meer verder doorlopen
									}
								}
							}
							else 
							{
								for (j=1; j<=i; j++) {
									if (berekening10.substr(i-j,1)== "*" || berekening10.substr(i-j,1)== "/" || berekening10.substr(i-j,1)== "+" || berekening10.substr(i-j,1)== "-" || berekening10.substr(i-j,1)== "(") {  //zoek de plus, min, vermenigvuldiging of deling voor de macht en bereken het juiste grondtal; het openingshaakje wordt gezocht om in situaties als (2^2)+1 geen problemen te krijgen.
										grondtal = eval(berekening10.slice(i-(j-1), i));
										var berekening11 = berekening10.replace(berekening10.slice(i-(j-1), i), "grondtal");
										j=i;  //deze loop niet meer verder doorlopen
									}
								}
							}
							if (grondtal == "") {  //als er nog geen grondtal gevonden is, neem dat de eerste
							console.log("HELLO");
							grondtal = eval(berekening10.slice(0,i));
							var berekening11 = berekening10.replace(berekening10.slice(0,i), "grondtal");
							}
							
							//Exponent van de macht zoeken
							var k = i+5;
							var sluithaakjes = 0; 
							var openhaakjes = 0;
							for (j=0; j<k; j++) {
								if (berekening10.substr(k+j,1) == ")") {
									sluithaakjes += 1;
								}					
								if (berekening10.substr(k+j,1) == "(") {
									openhaakjes += 1;
								}
								if (sluithaakjes == openhaakjes) {
									console.log(j);
									console.log(berekening10.slice(k, k+(j+1)));						
									exponent = eval(berekening10.slice(k, k+(j+1)));	 
									var berekening11 = berekening11.replace(berekening10.slice(k, k+(j+1)), "exponent");
									j=k;  //deze loop niet meer verder doorlopen
								}
							}
						}
					}
					
					//De eigenlijke machtswortel berekenen
					var machtswortel = Math.pow(exponent, 1/grondtal);
					console.log(machtswortel);
					if (berekening11 == "") {  //als er geen machtberekening is, deze overslaan en berekening12 gelijkstellen aan berekening10
						var berekening12 = berekening10;
					}
					else {
						var berekening12 = berekening11.replace("grondtalxWortexponent", machtswortel);
					}
					return eval('('+ berekening12 + ')'); 		
				}, '#2d3275', 2);
				
				//Formule 2
				myGraph.drawEquation(function(x) {
					var berekening = this.formule2.value;
					var lengte = berekening.length;
					for (i=0; i<lengte; i++) {
						if (berekening.slice(i,i+2) == "*/" || berekening.slice(i,i+2) == "/*" || berekening.slice(i,i+2) == "*+" || berekening.slice(i,i+2) == "/+" || berekening.slice(i,i+2) == "-+" || berekening.slice(i,i+2) == "-*" || berekening.slice(i,i+2) == "+*" || berekening.slice(i,i+2) == "-/" || berekening.slice(i,i+2) == "+/" || berekening.slice(i,i+2) == "**" || berekening.slice(i,i+2) == "//" || berekening.slice(i,i+2) == "++") {
							berekening = "error";  //De variabele berekening is error, zodat de variabele uitvoer undefined zal zijn.
						}
					}
					
					for (j=1; j<lengte; j++) {
						if (berekening.substr(j,1) == ")") {
							sluithaakjes += 1;
						}
						if (berekening.substr(j,1) == "(") {
							openhaakjes += 1;
						}
					}
					if (openhaakjes != sluithaakjes) {
						berekening == "error";
					}
					
					var berekening0 = berekening.replace("--", "+");  //dubbele min vervangen door plus
					var berekening1 = berekening0.replace("log", "1/Math.LN10 * Math.log"); //Math.log berekent de natuurlijke logaritme, daarom deze omslachtige manier.
					var berekening2 = berekening1.replace("ln", "Math.log");
					var berekening3 = berekening2.replace("sin", "Math.sin");
					var berekening4 = berekening3.replace("cos", "Math.cos");
					var berekening5 = berekening4.replace("tan", "Math.tan");
					var berekening6 = berekening5.replace("π", "Math.PI");
					var berekening7 = berekening6.replace("e", "Math.E");
					var berekening8 = berekening7.replace("√", "Math.sqrt");
					var berekening10 = berekening8.replace("^", "**");
					
					//Hogere machtswortelberekenen
					
					var tekens = berekening10.length;
					var berekening11 = "";  //deze drie variabelen worden aangemaakt om later in een berekening te testen of ze leeg zijn
					var grondtal = "";
					var exponent = "";
					for (i=0; i<tekens; i++) {
						if (berekening10.slice(i,i+5) == "xWort") {
							//Grondtal van de macht zoeken
							if (berekening10.slice(i-1,i) == ")") {  //als het teken voor de macht een sluithaakje is, dan
								var sluithaakjes = 0;  // dit is het aantal sluithaakjes wat gevonden wordt voor de macht
								var openhaakjes = 0;  // dit is het aantal openhaakjes wat gevonden wordt voor de macht
								for (j=1; j<i; j++) {
									if (berekening10.substr(i-j,1) == ")") {
										sluithaakjes += 1;
									}
									if (berekening10.substr(i-j,1) == "(") {
										openhaakjes += 1;
									}
									if (sluithaakjes == openhaakjes) {
										console.log(berekening10.slice(i-(j+1), i));
										grondtal = eval(berekening10.slice(i-(j+1), i));	 //dit is het grondtal van de macht	
										var berekening11 = berekening10.replace(berekening10.slice(i-(j+1), i), "grondtal");
										j=i;  //deze loop niet meer verder doorlopen
									}
								}
							}
							else 
							{
								for (j=1; j<=i; j++) {
									if (berekening10.substr(i-j,1)== "*" || berekening10.substr(i-j,1)== "/" || berekening10.substr(i-j,1)== "+" || berekening10.substr(i-j,1)== "-" || berekening10.substr(i-j,1)== "(") {  //zoek de plus, min, vermenigvuldiging of deling voor de macht en bereken het juiste grondtal; het openingshaakje wordt gezocht om in situaties als (2^2)+1 geen problemen te krijgen.
										grondtal = eval(berekening10.slice(i-(j-1), i));
										var berekening11 = berekening10.replace(berekening10.slice(i-(j-1), i), "grondtal");
										j=i;  //deze loop niet meer verder doorlopen
									}
								}
							}
							if (grondtal == "") {  //als er nog geen grondtal gevonden is, neem dat de eerste
							console.log("HELLO");
							grondtal = eval(berekening10.slice(0,i));
							var berekening11 = berekening10.replace(berekening10.slice(0,i), "grondtal");
							}
							
							//Exponent van de macht zoeken
							var k = i+5;
							var sluithaakjes = 0; 
							var openhaakjes = 0;
							for (j=0; j<k; j++) {
								if (berekening10.substr(k+j,1) == ")") {
									sluithaakjes += 1;
								}					
								if (berekening10.substr(k+j,1) == "(") {
									openhaakjes += 1;
								}
								if (sluithaakjes == openhaakjes) {
									console.log(j);
									console.log(berekening10.slice(k, k+(j+1)));						
									exponent = eval(berekening10.slice(k, k+(j+1)));	 
									var berekening11 = berekening11.replace(berekening10.slice(k, k+(j+1)), "exponent");
									j=k;  //deze loop niet meer verder doorlopen
								}
							}
						}
					}
					
					//De eigenlijke machtswortel berekenen
					var machtswortel = Math.pow(exponent, 1/grondtal);
					console.log(machtswortel);
					if (berekening11 == "") {  //als er geen machtberekening is, deze overslaan en berekening12 gelijkstellen aan berekening10
						var berekening12 = berekening10;
					}
					else {
						var berekening12 = berekening11.replace("grondtalxWortexponent", machtswortel);
					}
					return eval('('+ berekening10 + ')'); 		
				}, '#2c7551', 2);	
			}
		};
	  };
	 

	function Clearandback() {
		location.reload();
		Back(); 	
	}
	
	function Back() {
	document.getElementById("1").style.display = "block";
	document.getElementById("2").style.display = "none";
	document.getElementById("buttons").style.display = "block";
	}
	</script>
</div>

	

</body> 
</html>
